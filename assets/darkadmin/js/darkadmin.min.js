$(document).ready(function () {
   setInterval(function () {
      $("#preloader").fadeOut("slow");
   }, 300);

   $('.sidenav').sidenav();
   $('.collapsible').collapsible();
   $(".dropdown-trigger").dropdown();
   $('.fixed-action-btn').floatingActionButton();
   $('.tooltipped').tooltip();

   $('input.search').autocomplete({
      data: {
         "dashboard.html": false,
         "email/inbox.html": false,
         "email/read.html": false,
         "email/compose.html": false,
         "chat.html": false,
         "calendar.html": false
      },
   });

   //  Overlay Scrollbars
   $("body").overlayScrollbars({
      className: "os-theme-light",
   });

   $(".sidenav").overlayScrollbars({
      className: "os-theme-light",
      scrollbars: {
         autoHide: "leave",
         autoHideDelay: 50,
      },
   });

   $("#search").click(function (e) {
      e.preventDefault();

      $("#overlay-search").css({
         visibility: "visible",
         opacity: "1"
      });

      $("#form-search").css({
         visibility: "visible",
         opacity: "1"
      });
   });

   $("#overlay-search").click(function () {
      $("#overlay-search").css({
         visibility: "hidden",
         opacity: "0"
      });

      $("#form-search").css({
         visibility: "hidden",
         opacity: "0"
      });
   });

   function sidenavCollapsible(collapsibleID) {
      $(collapsibleID + " .collapsible-header").click(function () {
         $(collapsibleID + " .arrow_right").toggleClass("arrow_down");

         var collapsibleLast = localStorage.getItem("collapsibleLast");
         if (collapsibleLast !== collapsibleID) {
            $(collapsibleLast + " .arrow_right").removeClass("arrow_down");
         }
         localStorage.setItem("collapsibleLast", collapsibleID);
      });
   }

   sidenavCollapsible("#collapse-email");
   sidenavCollapsible("#collapse-ui-kit");
   sidenavCollapsible("#collapse-advanced-ui");
   sidenavCollapsible("#collapse-forms");
   sidenavCollapsible("#collapse-charts");
   sidenavCollapsible("#collapse-tables");
   sidenavCollapsible("#collapse-icons");
   sidenavCollapsible("#collapse-special-pages");
   sidenavCollapsible("#collapse-authentication");
   sidenavCollapsible("#collapse-error");
});